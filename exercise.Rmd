---
title: "Exercise 4"
author: '[Your first name] [Your last name]'
date: "`r Sys.Date()`"
output:
  html_document:
    number_sections: true
    toc: true
    toc_float: true
    toc_depth: 3
---

**This assignment will be a bit light by the standards of the last two assignments. But that's because the mid-term's gonna be brutal... but fun! Okay, mostly fun. But challenging! Here, you practice your life table chops. Doing it efficiently and understanding the results will be crucial for the mid-term.**

# Setup {.unnumbered}

```{r}
if (!require("pacman")) install.packages("pacman")
# p_load function loads packages if installed, or install then loads otherwise
pacman::p_load(dplyr, ggplot2, knitr, kableExtra, readr)
```

# Madagascar 1966

## Data collection

```{r q01_data}
q01_data <- readRDS("data/q01_data.rds")
```

## About the data

**You've loaded a life table for Madagascar in 1966, which was constructed by the `demogR::life.table` function (with default argument settings) from the `demogR::goodman` dataset. It has the typical columns for the life table... although it's missing one that you'll fill in. The column naming conventions are the same as in the course notes.**

## Fill in `px`

**Below, fill in the missing column, `px`, appending it as a new column in the life table. Then display the result.**

```{r}

```

**0.5 points**

## Build your own life table

**Using the methods we learned in class, build your own life table using the age-specific mortality rates in the life table that was provided to you for this question set. For the very young age groups, use the method we discussed in class and that is depicted in PHG table 3.3 on page 48 to estimate ${}_{n}a_x$. For all other age groups besides the open-ended age interval, assume that ${}_{n}a_x = n/2$. Display the result.**

```{r}

```

**1 point**

## Compare the ${}_{n}a_x$ values between the two life tables

**Using whatever means at your disposal (plots, tables, arithmetic, statistical methods) compare the ${}_{n}a_x$ values between the two life tables. With reference to the observed period age-specific mortality and to our lessons in class, explain the comparisons you draw.**

```{r}

```

**Explanation below**



**1 point**

## The wrong model?

**Read about the Coale-Demeny model life tables on pg. 4 of the report linked below:**

https://www.who.int/healthinfo/paper08.pdf

**With that knowledge in hand, describe a key mistake we made with the very young age intervals when we constructed our own life table.**

**Response below**



**0.5 points**

**Sub-total available: 5 points**

## Expected age at death

**Using the life table computed by `demogR`, compute the expected age at death at each age group. With reference to other columns in the life table, explain the age pattern of expected age at death.**

* **0.5 points for getting expected age at death correct**
* **0.5 points for a well-reasoned explanation of the pattern**

```{r}

```

**Explanation below**



## Working-aged person-years

**Recall that ${}_{n}L_x$ is the age-specific person-years lived in an age interval while $T_x$ is the total person-years lived above exact age $x$. With that in mind, use the `demogR` life table to calculate the number of person-years lived in the working age interval between 15 and 65.**

```{r}

```

**Answer in a full sentence below**



**0.5 points**

## Total years lived among those who died

**For each age interval, calculate the TOTAL person-years lived among those who died in the age interval, and append it to the life table generated by `demogR`**

```{r}

```

**0.5 points**

# Ukraine 2013

## Data collection

```{r}
q02_data <- readRDS("data/q02_data.rds")
```

## About the data

**You have just loaded five-year age-specific mortality rates for Ukraine in 2013, which come from the Human Mortality Database. The columns follow the naming conventions from the course notes.**

## Another nation, another year, another life table

**Build a period life table using the data, assuming that ${}_{n}a_x = n/2$ across all age groups. Display the results.**

```{r}

```

**1 point**

## Explain the wacky results

**Do you notice anything strange about the results? If so, explain what's happening with reference to what we've learned in class.**

**1 point**

**Sub-total available: 2 points**

**Total available: 7 points + 0.5 for good-faith completion**